set from = $my_protonmail_email
set spoolfile = "+protonmail/Inbox"
set copy = no
unset trash

set smtp_url = "smtp://$my_protonmail_email:$my_protonmail_pass@127.0.0.1:1025/"
set ssl_force_tls = yes
set ssl_starttls = yes

set imap_user = $my_protonmail_email
set imap_pass = $my_protonmail_pass
set imap_authenticators = "login"

macro index,pager gi "<change-folder>+protonmail/Inbox<enter>" "go to Inbox"
macro index,pager ga "<change-folder>+protonmail/Archive<enter>" "go to Archive"
macro index,pager gs "<change-folder>+protonmail/Sent<enter>" "go to Sent"

macro index,pager o "<sync-mailbox><shell-escape>pollmail protonmail\n"

# Mark message(s) as read, sync, move to IMAP Archive, then sync again. This
# ensures no duplicate messages and that read states are preserved.
macro index,pager A "\
  <tag-prefix-cond>WN\
  o\
  :set confirmappend=no\n\
  <tag-prefix-cond><save-message>imap://127.0.0.1:1143/Archive\n\
  :set confirmappend=yes\n\
  :set delete=yes\n\
  o\
  :set delete=no\n" "Mark as read and move to Archive"

macro index,pager M "<tag-prefix-cond><save-message>imap://127.0.0.1:1143/Folders/" "Move to an IMAP folder"

