# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

###########################
### CUSTOMIZED DEFAULTS ###
###########################

set $mod Mod4
set $exe exec --no-startup-id exec

font pango:PragmataPro Liga 10

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return $exe ~/.local/kitty.app/bin/kitty

# kill focused window
bindsym $mod+Shift+q kill

# start rofi
bindsym $mod+d $exe rofi -show run

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left 50
bindsym $mod+Shift+j move down 50
bindsym $mod+Shift+k move up 50
bindsym $mod+Shift+l move right 50
bindsym $mod+Shift+semicolon move position center

focus_follows_mouse no

# Toggle split direction
bindsym $mod+v split toggle

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+Shift+a focus child

#################
### RELOADING ###
#################

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

###################
### RESIZE MODE ###
###################

set $leave-mode mode "default"
set $esc-leave-mode bindsym Escape mode "default"
set $ret-leave-mode bindsym Return mode "default"

# resize window (you can also use the mouse for that)
mode "resize" {
  bindsym h resize shrink width 10 px or 10 ppt
  bindsym j resize shrink height 10 px or 10 ppt
  bindsym k resize grow height 10 px or 10 ppt
  bindsym l resize grow width 10 px or 10 ppt

  bindsym $mod+r $leave-mode
  $esc-leave-mode
  $ret-leave-mode
}

bindsym $mod+r mode "resize"

##################
### WORKSPACES ###
##################

set $ws-browse 1:  browse
set $ws-work   2:  work
set $ws-tmux   3:  tmux
set $ws-nvim   4:  nvim
set $ws-comm   5:  comm

workspace "$ws-browse" output DP-3
workspace "$ws-work" output DP-3
workspace "$ws-tmux" output DP-0
workspace "$ws-nvim" output DP-3
workspace "$ws-comm" output DP-3

bindsym $mod+1 workspace $ws-browse
bindsym $mod+2 workspace $ws-work
bindsym $mod+3 workspace $ws-tmux
bindsym $mod+4 workspace $ws-nvim
bindsym $mod+5 workspace $ws-comm
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws-browse
bindsym $mod+Shift+2 move container to workspace $ws-work
bindsym $mod+Shift+3 move container to workspace $ws-tmux
bindsym $mod+Shift+4 move container to workspace $ws-nvim
bindsym $mod+Shift+5 move container to workspace $ws-comm
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# Follow focused container to workspace
bindsym $mod+Ctrl+1 move container to workspace $ws-browse, workspace $ws-browse
bindsym $mod+Ctrl+2 move container to workspace $ws-work, workspace $ws-work
bindsym $mod+Ctrl+3 move container to workspace $ws-tmux, workspace $ws-tmux
bindsym $mod+Ctrl+4 move container to workspace $ws-nvim, workspace $ws-nvim
bindsym $mod+Ctrl+5 move container to workspace $ws-comm, workspace $ws-comm
bindsym $mod+Ctrl+6 move container to workspace 6, workspace 6
bindsym $mod+Ctrl+7 move container to workspace 7, workspace 7
bindsym $mod+Ctrl+8 move container to workspace 8, workspace 8
bindsym $mod+Ctrl+9 move container to workspace 9, workspace 9
bindsym $mod+Ctrl+0 move container to workspace 10, workspace 0

workspace_auto_back_and_forth yes

############
### BOOT ###
############

# Don't set urgency on windows asking for focus on activation
focus_on_window_activation none

# Set colors from wal
$exe wal -R

# Hide mouse while typing and after a timeout
$exe xbanish
$exe unclutter -b

# Touchpad settings
$exe synclient VertScrollDelta=-112 HorizScrollDelta=-112 HorizTwoFingerScroll=1 MaxTapTime=0

# Load compton compositor
$exe compton -b

# Mopidy and script to enable ncmpcpp visualization
$exe mopidy
$exe ~/bin/pipe-audio-viz

### Tray ###
$exe redshift-gtk
$exe blueman-applet
$exe nm-applet

### Browse ###
for_window [instance="^personal-browse$"] move workspace $ws-browse
exec RESOURCE_NAME=personal-browse qutebrowser --enable-webengine-inspector -r personal

### Work ###
for_window [instance="work-browse"] move workspace $ws-work
for_window [instance="^nvim$"] move workspace $ws-nvim
for_window [instance="^tmux$"] move workspace $ws-tmux

# Default workspace
workspace "$ws-browse" output DP-3

##################
### SCRATCHPAD ###
##################

set $mode-scratchpad "Scratchpad: [d]otfiles, ncm[p]cpp, fran[z], si[g]nal, [m]utt, [n]ewsboat"

mode $mode-scratchpad {
  bindsym b [class="^ProtonMail Bridge$"] scratchpad show, move position center, mode default
  bindsym d [instance="^dotfiles$"] scratchpad show, move position center, mode default
  bindsym m [instance="^neomutt$"] scratchpad show, move position center, mode default
  bindsym n [instance="^newsboat$"] scratchpad show, move position center, mode default
  bindsym p [class="^ncmpcpp$"] scratchpad show, move position center, mode default
  bindsym z [class="^Franz$"] scratchpad show, move position center, mode default
  bindsym g [class="^Signal$"] scratchpad show, move position center, mode default
  bindsym $mod+p scratchpad show, mode default

  bindsym $mod+p $leave-mode
  $esc-leave-mode
  $ret-leave-mode
}

bindsym $mod+p mode $mode-scratchpad

for_window [class="^ProtonMail Bridge$"] border pixel 10, move to scratchpad
$exe Desktop-Bridge

for_window [instance="^dotfiles$"] border pixel 10, move to scratchpad, resize set 1400 px 1000 px
$exe kitty --class="dotfiles" -o background_opacity=0.85 nvim -S ~/dotfiles/Session.vim

for_window [instance="^neomutt$"] border pixel 10, move to scratchpad
$exe kitty --class="neomutt" -o background_opacity=0.85 neomutt

for_window [instance="^newsboat$"] border pixel 10, move to scratchpad, resize set 800 px 1000 px
$exe ~/bin/scratch-newsboat

for_window [class="^ncmpcpp$"] border pixel 10, move to scratchpad
$exe kitty --class="ncmpcpp" -o background_opacity=0.85 ncmpcpp

for_window [class="^Franz$"] border pixel 10, move to scratchpad, resize set 1400 px 1000 px
$exe franz

for_window [class="^Signal$"] border pixel 10, move to scratchpad
$exe signal-desktop

##################
### OTHER APPS ###
##################

set $float border pixel 10, floating enable

for_window [class="^Blueman-manager$"] $float
for_window [class="^Lxappearance$"] $float

#######################
### SCREENSHOT MODE ###
#######################

set $mode-screenshot "Screenshot: [f]ull screen, [F]ull screen to clipboard, [s]election"

mode $mode-screenshot {
  bindsym --release f exec "flameshot screen ~/Pictures/Screenshots", mode default
  bindsym --release s exec "flameshot gui", mode default
  bindsym --release Shift+f $exe "flameshot screen -c", mode default

  bindsym $mod+Shift+s $leave-mode
  $esc-leave-mode
  $ret-leave-mode
}

bindsym --release $mod+Shift+s mode $mode-screenshot

##################
### MEDIA KEYS ###
##################

bindsym --release XF86AudioPlay $exe mpc toggle
bindsym --release XF86AudioPause $exe mpc toggle
bindsym --release XF86AudioNext $exe mpc next

bindsym --release XF86AudioLowerVolume $exe /usr/bin/pactl set-sink-volume @DEFAULT_SINK@ '-5%'
bindsym --release XF86AudioRaiseVolume $exe /usr/bin/pactl set-sink-volume @DEFAULT_SINK@ '+5%'
bindsym --release XF86AudioMute $exe /usr/bin/pactl set-sink-mute @DEFAULT_SINK@ toggle

bindsym XF86MonBrightnessUp $exe xbacklight -inc 5
bindsym XF86MonBrightnessDown $exe xbacklight -dec 5

#############
### THEME ###
#############

$exe feh --bg-scale /home/redplateaus/Pictures/Wallpaper/gruv.jpg

# Get colors from xresources, which come from wal
set_from_resource $color0 i3wm.color0
set_from_resource $color1 i3wm.color1
set_from_resource $color2 i3wm.color2
set_from_resource $color3 i3wm.color3
set_from_resource $color4 i3wm.color4
set_from_resource $color5 i3wm.color5
set_from_resource $color6 i3wm.color6
set_from_resource $color7 i3wm.color7
set_from_resource $color8 i3wm.color8
set_from_resource $color9 i3wm.color9
set_from_resource $color10 i3wm.color10
set_from_resource $color11 i3wm.color11
set_from_resource $color12 i3wm.color12
set_from_resource $color13 i3wm.color13
set_from_resource $color14 i3wm.color14
set_from_resource $color15 i3wm.color15

# Interpolate opacity; this is hex
set $opacity 44

# Window colors          border           background       text      indicator  child_border
client.focused           $color2          $color2          $color15  $color2
client.focused_inactive  $color2$opacity  $color2$opacity  $color15  #85990044
client.unfocused         $color2$opacity  $color2$opacity  $color7   #85990044
client.urgent            $color2$opacity  $color1          $color15  $color1

bar {
  status_command i3blocks -c ~/.i3blocks.conf
  tray_padding 0

  colors {
    background $color0
    statusline $color15
    separator $color15

    # Item              border   background  text
    focused_workspace   $color2  $color2     $color0
    active_workspace    $color2  $color2     $color15
    inactive_workspace  $color0  $color0     $color7
    urgent_workspace    $color1  $color1     $color15
  }
}

set $border-default 5
set $gaps-default-inner 10
set $gaps-default-outer 10

new_window pixel $border-default
gaps inner $gaps-default-inner
gaps outer $gaps-default-outer

set $mode-gaps "Gaps: +/-/0/[d]efault"

mode $mode-gaps {
  bindsym plus   gaps inner current plus 5
  bindsym equals gaps inner current plus 5
  bindsym minus  gaps inner current minus 5
  bindsym 0 gaps inner current set 0
  bindsym d gaps inner current set $gaps-default-inner

  bindsym $mod+g $leave-mode
  $esc-leave-mode
  $ret-leave-mode
}

bindsym $mod+g mode $mode-gaps

###################
### EXIT PROMPT ###
###################

set $mode-exit "Exit: [l]ock, l[o]gout, [r]eboot, [s]hutdown"

mode $mode-exit {
  bindsym l mode default, $exe i3lock-fancy -pt '' -- scrot
  bindsym o $exe i3-msg exit
  bindsym r $exe systemctl reboot
  bindsym s $exe systemctl poweroff
  # bindsym h mode default, $exe systemctl hibernate

  bindsym $mod+Shift+e $leave-mode
  $esc-leave-mode
  $ret-leave-mode
}

bindsym $mod+Shift+e mode $mode-exit
