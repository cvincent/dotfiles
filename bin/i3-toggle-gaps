#!/usr/bin/env bash

# toggle_gaps [on|off|toggle]

# INNER=10
# OUTER=10

SIZE_1=0
SIZE_2=10
SIZE_3=50

# Get current workspace.
workspace=$(i3-msg -t get_workspaces \
        | jq -r '.[] | if .["focused"] then .["name"] else empty end')
# Get current inner gap size. (0 means default)
inner_gaps=$(i3-msg -t get_tree \
        | jq -r 'recurse(.nodes[]) | if .type == "workspace" and .name == "'"$workspace"'" then .gaps.inner else empty end')

inner_gaps=$(($inner_gaps + 10))

if [[ "$inner_gaps" == "$SIZE_1" ]]; then
    # mode="off"
    outer=$(($SIZE_2 - 20))
    i3-msg "gaps inner current set $SIZE_2; gaps outer current set $outer"
elif [[ "$inner_gaps" == "$SIZE_2" ]]; then
    # mode="on"
    outer=$(($SIZE_3 - 20))
    i3-msg "gaps inner current set $SIZE_3; gaps outer current set $outer"
elif [[ "$inner_gaps" == "$SIZE_3" ]]; then
    # mode="on"
    outer=$(($SIZE_1 - 20))
    i3-msg "gaps inner current set $SIZE_1; gaps outer current set $outer"
else
    outer=$(($SIZE_2 - 20))
    i3-msg "gaps inner current set $SIZE_2; gaps outer current set $outer"
fi
